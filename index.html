<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Example</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <input id="file" type="file">
    <br>
    <textarea name="" id="msg" cols="30" rows="10"></textarea>
    <br>
    <img src="" alt="" id="img">

    <a href="" id="download">Download</a>

    <script src="/static/steganogre.js"></script>
    <script>
      const msg = `32j4rwelq;fadsk;fjdalsn cmansmÄ{{s}};'la;dkf;ksafojawpok23;m432u482345678900)*&^%$#@kasmc./'`
      const encoded = steganogre.encode(msg)

      console.log(msg)
      console.log(encoded.dataURL)
      console.log(encoded.downloadHref())

      const img = new Image()
      steganogre.decode('/test.png').then(function(msg) {
        console.log(msg)
      }, er => console.error(er))
    </script>
    <script>
      function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object

        // Loop through the FileList and render image files as thumbnails.
        for (var i = 0, f; f = files[i]; i++) {

          // Only process image files.
          if (!f.type.match('image.*')) {
            continue;
          }

          var reader = new FileReader();

          // Closure to capture the file information.
          reader.onload = (function(theFile) {
            return function(e) {
              console.log(e.target.result);
            };
          })(f);

          // Read in the image file as a data URL.
          // console.log(reader.readAsDataURL(f));
        }
      }

      document.getElementById('file').addEventListener('change', handleFileSelect, false);
    </script>
  </body>
</html>